<!-- Admin Dashboard -->
<div class="min-h-screen bg-slate-950">
  <!-- Admin Header -->
  <div class="bg-slate-900 border-b border-slate-700 shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center py-4 sm:py-0 sm:h-16">
        <h1 class="text-xl sm:text-2xl font-bold text-white mb-2 sm:mb-0">
          <span class="text-slate-300">🛡️</span> Admin Dashboard
        </h1>
        <div class="text-sm text-slate-300">
          Welcome, <span class="font-semibold text-white">{{currentUser.name}}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
    
    <!-- Stats Cards -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="bg-slate-900 rounded-xl p-4 sm:p-6 border border-slate-700 shadow-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs sm:text-sm font-medium text-slate-300">Pending Hosts</p>
            <p class="text-xl sm:text-2xl font-bold text-white">{{stats.pendingHosts}}</p>
          </div>
          <div class="text-yellow-400 text-2xl sm:text-3xl">⏳</div>
        </div>
      </div>
      
      <div class="bg-slate-900 rounded-xl p-4 sm:p-6 border border-slate-700 shadow-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs sm:text-sm font-medium text-slate-300">Approved Hosts</p>
            <p class="text-xl sm:text-2xl font-bold text-white">{{stats.approvedHosts}}</p>
          </div>
          <div class="text-green-400 text-2xl sm:text-3xl">✅</div>
        </div>
      </div>
      
      <div class="bg-slate-900 rounded-xl p-4 sm:p-6 border border-slate-700 shadow-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs sm:text-sm font-medium text-slate-300">Total Webinars</p>
            <p class="text-xl sm:text-2xl font-bold text-white">{{stats.totalWebinars}}</p>
          </div>
          <div class="text-slate-400 text-2xl sm:text-3xl">📹</div>
        </div>
      </div>
      
      <div class="bg-slate-900 rounded-xl p-4 sm:p-6 border border-slate-700 shadow-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs sm:text-sm font-medium text-slate-300">Total Users</p>
            <p class="text-xl sm:text-2xl font-bold text-white">{{stats.totalUsers}}</p>
          </div>
          <div class="text-purple-400 text-2xl sm:text-3xl">👥</div>
        </div>
      </div>
    </div>

    <!-- Pending Host Approvals -->
    <div class="bg-slate-900 rounded-xl border border-slate-700 mb-8 shadow-lg">
      <div class="px-4 sm:px-6 py-4 border-b border-slate-700">
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center">
          <h2 class="text-lg sm:text-xl font-semibold text-white mb-2 sm:mb-0">
            <span class="text-slate-300">📋</span> Pending Host Registrations
          </h2>
          <button ng-click="refreshPendingHosts()" 
                  class="bg-primary-600 hover:bg-primary-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md">
            🔄 Refresh
          </button>
        </div>
      </div>
      
      <div class="p-4 sm:p-6">
        <!-- Loading State -->
        <div ng-if="isLoading" class="text-center py-8">
          <div class="loading mx-auto mb-4"></div>
          <p class="text-slate-300">Loading pending hosts...</p>
        </div>
        
        <!-- No Pending Hosts -->
        <div ng-if="!isLoading && pendingHosts.length === 0" class="text-center py-8">
          <div class="text-slate-400 text-4xl sm:text-6xl mb-4">✨</div>
          <p class="text-slate-300 text-lg">No pending host registrations</p>
          <p class="text-sm text-slate-400">All caught up!</p>
        </div>
        
        <!-- Pending Hosts List -->
        <div ng-if="!isLoading && pendingHosts.length > 0" class="space-y-4">
          <div ng-repeat="host in pendingHosts" 
               class="bg-slate-800 rounded-xl p-4 border border-slate-600 shadow-md">
            
            <!-- Mobile Layout -->
            <div class="block sm:hidden">
              <div class="flex items-center justify-between mb-3">
                <h3 class="font-semibold text-white text-lg">{{host.name}}</h3>
                <span class="px-3 py-1 bg-yellow-900 text-yellow-200 text-xs rounded-full font-medium">
                  Pending
                </span>
              </div>
              <p class="text-slate-300 text-sm mb-2">{{host.email}}</p>
              <p class="text-slate-400 text-xs mb-4">
                Registered: {{host.createdAt | date:'short'}}
              </p>
              <div class="grid grid-cols-2 gap-3">
                <button ng-click="showApprovalModal(host)" 
                        class="w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg font-medium transition duration-200 shadow-md">
                  ✅ Approve
                </button>
                <button ng-click="rejectHost(host)" 
                        class="w-full px-4 py-3 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg font-medium transition duration-200 shadow-md">
                  ❌ Reject
                </button>
              </div>
            </div>

            <!-- Desktop Layout -->
            <div class="hidden sm:flex sm:justify-between sm:items-center">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <h3 class="font-semibold text-white text-lg">{{host.name}}</h3>
                  <span class="px-3 py-1 bg-yellow-900 text-yellow-200 text-xs rounded-full font-medium">
                    Pending
                  </span>
                </div>
                <p class="text-slate-300 text-sm mb-1">{{host.email}}</p>
                <p class="text-slate-400 text-xs">
                  Registered: {{host.createdAt | date:'medium'}}
                </p>
              </div>
              
              <div class="flex space-x-3 ml-6">
                <button ng-click="showApprovalModal(host)" 
                        class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg font-medium transition duration-200 shadow-md">
                  ✅ Approve
                </button>
                <button ng-click="rejectHost(host)" 
                        class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg font-medium transition duration-200 shadow-md">
                  ❌ Reject
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- All Users -->
    <div class="bg-slate-900 rounded-xl border border-slate-700 shadow-lg">
      <div class="px-4 sm:px-6 py-4 border-b border-slate-700">
        <h2 class="text-lg sm:text-xl font-semibold text-white">
          <span class="text-slate-300">👥</span> All Users
        </h2>
      </div>
      
      <div class="p-4 sm:p-6">
        <!-- Mobile Cards Layout -->
        <div class="block lg:hidden space-y-4">
          <div ng-repeat="user in allUsers" class="bg-slate-800 rounded-lg p-4 border border-slate-600">
            <div class="flex justify-between items-start mb-3">
              <div class="flex-1">
                <h3 class="font-semibold text-white">{{user.name}}</h3>
                <p class="text-slate-300 text-sm">{{user.email}}</p>
              </div>
              <div class="flex flex-col space-y-2">
                <span class="px-2 py-1 bg-slate-700 text-blue-200 text-xs rounded-full text-center">
                  {{user.role}}
                </span>
                <span ng-class="{
                  'bg-green-800 text-green-200': user.status === 'approved',
                  'bg-yellow-800 text-yellow-200': user.status === 'pending',
                  'bg-red-800 text-red-200': user.status === 'rejected'
                }" class="px-2 py-1 text-xs rounded-full text-center">
                  {{user.status}}
                </span>
              </div>
            </div>
            <p class="text-slate-400 text-xs mb-3">
              Registered: {{user.createdAt | date:'shortDate'}}
            </p>
            <div class="flex space-x-2">
              <button ng-if="user.status === 'approved'" 
                      ng-click="extendAccess(user)"
                      class="flex-1 bg-primary-600 hover:bg-primary-500 text-white text-xs py-2 px-3 rounded font-medium">
                Extend
              </button>
              <button ng-if="user.role !== 'admin'" 
                      ng-click="deleteUser(user)"
                      class="flex-1 bg-red-600 hover:bg-red-500 text-white text-xs py-2 px-3 rounded font-medium">
                Delete
              </button>
            </div>
          </div>
        </div>

        <!-- Desktop Table Layout -->
        <div class="hidden lg:block overflow-x-auto">
          <table class="min-w-full">
            <thead>
              <tr class="border-b border-slate-700">
                <th class="text-left py-3 px-4 text-slate-300 font-medium">Name</th>
                <th class="text-left py-3 px-4 text-slate-300 font-medium">Email</th>
                <th class="text-left py-3 px-4 text-slate-300 font-medium">Role</th>
                <th class="text-left py-3 px-4 text-slate-300 font-medium">Status</th>
                <th class="text-left py-3 px-4 text-slate-300 font-medium">Registered</th>
                <th class="text-left py-3 px-4 text-slate-300 font-medium">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="user in allUsers" class="border-b border-slate-700 hover:bg-slate-800 transition-colors">
                <td class="py-3 px-4 text-white">{{user.name}}</td>
                <td class="py-3 px-4 text-slate-300">{{user.email}}</td>
                <td class="py-3 px-4">
                  <span class="px-2 py-1 bg-slate-700 text-blue-200 text-xs rounded-full">
                    {{user.role}}
                  </span>
                </td>
                <td class="py-3 px-4">
                  <span ng-class="{
                    'bg-green-800 text-green-200': user.status === 'approved',
                    'bg-yellow-800 text-yellow-200': user.status === 'pending',
                    'bg-red-800 text-red-200': user.status === 'rejected'
                  }" class="px-2 py-1 text-xs rounded-full">
                    {{user.status}}
                  </span>
                </td>
                <td class="py-3 px-4 text-slate-400 text-sm">
                  {{user.createdAt | date:'shortDate'}}
                </td>
                <td class="py-3 px-4">
                  <button ng-if="user.status === 'approved'" 
                          ng-click="extendAccess(user)"
                          class="text-slate-400 hover:text-slate-300 text-sm mr-3 transition-colors">
                    Extend
                  </button>
                  <button ng-if="user.role !== 'admin'" 
                          ng-click="deleteUser(user)"
                          class="text-red-400 hover:text-red-300 text-sm transition-colors">
                    Delete
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Approval Modal -->
  <div ng-if="showModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
    <div class="bg-slate-900 rounded-xl p-6 max-w-md w-full border border-slate-700 shadow-2xl">
      <h3 class="text-lg font-semibold text-white mb-4">
        <span class="text-green-400">✅</span> Approve Host Registration
      </h3>
      
      <div class="mb-4">
        <p class="text-slate-300 mb-2">
          Approve <strong class="text-white">{{selectedHost.name}}</strong> ({{selectedHost.email}})?
        </p>
      </div>
      
      <div class="mb-6">
        <label class="block text-sm font-medium text-slate-300 mb-2">
          Access Expiry Date (Optional)
        </label>
        <input type="date" 
               ng-model="approvalForm.expiryDate"
               class="w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        <p class="text-xs text-slate-400 mt-1">
          Leave empty for unlimited access
        </p>
      </div>
      
      <div class="flex space-x-3">
        <button ng-click="approveHost()" 
                ng-disabled="isApproving"
                class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium disabled:opacity-50 transition-colors shadow-md">
          <span ng-if="!isApproving">✅ Approve</span>
          <span ng-if="isApproving">Approving...</span>
        </button>
        <button ng-click="closeModal()" 
                class="flex-1 bg-slate-700 hover:bg-primary-600 text-white py-2 px-4 rounded-lg font-medium transition-colors shadow-md">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>
